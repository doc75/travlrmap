<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link href='https://fonts.googleapis.com/css?family=Architects+Daughter' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/pygment_trac.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print">

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <title>Travlrmap by ripienaar</title>
  </head>

  <body>
    <header>
      <div class="inner">
        <h1>Travlrmap</h1>
        <h2>Sinatra based travels map</h2>
        <a href="https://github.com/ripienaar/travlrmap" class="button"><small>View project on</small> GitHub</a>
      </div>
    </header>

    <div id="content-wrapper">
      <div class="inner clearfix">
        <section id="main-content">
          <h1>
<a id="what" class="anchor" href="#what" aria-hidden="true"><span class="octicon octicon-link"></span></a>What?</h1>

<p>A web application that can be used to show where you have traveled to - or any
other locations really.  It's not a check-in style app more a means of tracking
city or attraction level places you're been to.</p>

<p>It's not social, does not have a database or app to check-in with, you maintain
data files in YAML that gets rendered on a map.</p>

<pre><code>---
:points:
- :type: :visit
  :lon: -73.961334
  :title: New York
  :lat: 40.784506
  :country: United States
  :comment: Sample Data
  :href: http://en.wikipedia.org/wiki/New_York
  :linktext: Wikipedia
- :type: :visit
  :lon: -71.046524
  :title: Boston
  :lat: 42.363871
  :country: United States
  :comment: Sample Data
  :href: http://en.wikipedia.org/wiki/Boston
  :linkimg: https://pbs.twimg.com/profile_images/430836891198320640/_-25bnPr.jpeg
</code></pre>

<p>Here you can see 2 places being defined including links, images and so forth.  A
visual helper tool is provided to make these YAML points.</p>

<p>It's not done, you can see it in action on my own site: <a href="http://travels.devco.net">http://travels.devco.net</a></p>

<h2>
<a id="setup" class="anchor" href="#setup" aria-hidden="true"><span class="octicon octicon-link"></span></a>Setup?</h2>

<p>The app is distributed as a <a href="https://rubygems.org/gems/travlrmap">rubygem</a> and runs
inside a ruby app server.</p>

<p>There is a demo of a fully working setup that runs on Heroku, it's on github and
can be seen <a href="https://github.com/ripienaar/travlrmap-demo">here</a>.</p>

<p>You only need to copy the <em>Gemfile</em> and <em>config.ru</em> files from there into a new
directory.  Create <em>config</em> and <em>images</em> directories and copy the sample config
files into the config directory removing the <em>.dist</em> extension.</p>

<p>You need to have bundler installed, a heroku account and the heroku toolkit
installed.</p>

<pre><code>$ heroku create
Creating polar-harbor-2295... done, stack is cedar-14
https://polar-harbor-2295.herokuapp.com/ | https://git.heroku.com/polar-harbor-2295.git
Git remote heroku added
</code></pre>

<p>Take a note of the URL this shows.  Edit the <em>travlrmap.yaml</em> and fix the paths
for the types of visit.</p>

<p>Now create the <em>Gemfile.lock</em></p>

<pre><code>$ bundle update
.
.
Your bundle is updated! Use `bundle show [gemname]` to see where a bundled gem is installed.
</code></pre>

<p>Check in everything into git and do <code>git push heroku master</code> when it's one your
app should be up and running and accessible.</p>

<p>Commit your files to your own git repo and start adding points, access <code>/geocode</code>
for a visual tool to assist in making point YAML.</p>

<h2>
<a id="adding-points" class="anchor" href="#adding-points" aria-hidden="true"><span class="octicon octicon-link"></span></a>Adding points?</h2>

<p>As of version 0.0.15 there's a visual helper to help you make points, you can access this
at <code>/geocode</code>, search for a place and the map will jump to it and drop a marker.  The
form will pre-fill what it can, fill in the rest and hit preview.</p>

<p>You'll see your point and the YAML to save.  You can also click arbitrary places using the
right mouse button.</p>

<p>In future we might support saving points to a YAML file if you want.</p>

<h2>
<a id="config-reference" class="anchor" href="#config-reference" aria-hidden="true"><span class="octicon octicon-link"></span></a>Config Reference?</h2>

<p>A sample config file can be seen in <em>config/travlrmap.yaml.dist</em>, it shows all
possible configuration options and samples of each:</p>

<h3>
<a id="map-section" class="anchor" href="#map-section" aria-hidden="true"><span class="octicon octicon-link"></span></a>:map: Section</h3>

<p>Basic overvall settings controlling data sources and the look of the site</p>

<h4>
<a id="data" class="anchor" href="#data" aria-hidden="true"><span class="octicon octicon-link"></span></a>:data:</h4>

<p>Where to load data from.</p>

<p>Data can be stored in one or multiple files, just list your yaml files in an array
here</p>

<h4>
<a id="width" class="anchor" href="#width" aria-hidden="true"><span class="octicon octicon-link"></span></a>:width:</h4>

<p>Map width.  The map gets rendered into a div on the page, this controls how much of
that div is taken up by the map, as the div is 100% wide this is a good way to
keep some relative sized whitespace around.</p>

<h4>
<a id="height" class="anchor" href="#height" aria-hidden="true"><span class="octicon octicon-link"></span></a>:height:</h4>

<p>Map height.  As above for :width:</p>

<h4>
<a id="zoom_control-map_type_control-street_view_control-overview_control-pan_control" class="anchor" href="#zoom_control-map_type_control-street_view_control-overview_control-pan_control" aria-hidden="true"><span class="octicon octicon-link"></span></a>:zoom_control:, :map_type_control:, :street_view_control:, :overview_control:, :pan_control:</h4>

<p>These settings enable and disable parts of the Google maps UI</p>

<h4>
<a id="title" class="anchor" href="#title" aria-hidden="true"><span class="octicon octicon-link"></span></a>:title:</h4>

<p>The title to show top of the page</p>

<h4>
<a id="cluster" class="anchor" href="#cluster" aria-hidden="true"><span class="octicon octicon-link"></span></a>:cluster:</h4>

<p>Set this to true to enable clustering of points, especially useful if you have many many points</p>

<h4>
<a id="cluster_grid_size" class="anchor" href="#cluster_grid_size" aria-hidden="true"><span class="octicon octicon-link"></span></a>:cluster_grid_size:</h4>

<p>The size of a grid that gets clustered by the clustering library, adjust this if you find that too
are being combined on the map</p>

<h4>
<a id="cluster_minumum_size" class="anchor" href="#cluster_minumum_size" aria-hidden="true"><span class="octicon octicon-link"></span></a>:cluster_minumum_size:</h4>

<p>A specific grid of the cluster must have at least this many items before its clustered, defaults to 2</p>

<h4>
<a id="cluster_zoom_on_click" class="anchor" href="#cluster_zoom_on_click" aria-hidden="true"><span class="octicon octicon-link"></span></a>:cluster_zoom_on_click:</h4>

<p>Set to false to disable the behavior where a cluster click zooms the map to expand all the items in it</p>

<h4>
<a id="cluster_image_path-cluster_image_extension-cluster_image_sizes" class="anchor" href="#cluster_image_path-cluster_image_extension-cluster_image_sizes" aria-hidden="true"><span class="octicon octicon-link"></span></a>:cluster_image_path:, :cluster_image_extension:, :cluster_image_sizes:</h4>

<p>You can customize the cluster images being used and a number has been provided in the basic HTML colors.</p>

<p>The urls being loaded are in the form <code>:cluster_image_path:N.:cluster_image_extension:</code> where <code>N</code> is a number from 1 to 5.</p>

<p>These images have to be square sized and if you tweak the sizes you should specify the sizes for image 1 to 5 in the array :cluster_image_sizes: as here.</p>

<h4>
<a id="show_geocode_link" class="anchor" href="#show_geocode_link" aria-hidden="true"><span class="octicon octicon-link"></span></a>:show_geocode_link:</h4>

<p>By default a <code>geocode</code> link is shown in the navbar that takes the user to a page allowing them to make
a new point, this can be disabled using this option</p>

<h4>
<a id="google_analytics_id" class="anchor" href="#google_analytics_id" aria-hidden="true"><span class="octicon octicon-link"></span></a>:google_analytics_id:</h4>

<p>If you'd like to track visits to your site using Google Analytics fill in your ID like <code>UA-99999999-9</code> here</p>

<h3>
<a id="views-section" class="anchor" href="#views-section" aria-hidden="true"><span class="octicon octicon-link"></span></a>:views: Section</h3>

<p>Custom views to show pre-decided parts of your map.  You should configure at least
one called <em>:default:</em>, the one in the sample data shows the world</p>

<p>All settings as per the sample is required.  You can get the lon/lat/zoom by simply
browsing to google maps and looking at the URL.</p>

<h3>
<a id="types-section" class="anchor" href="#types-section" aria-hidden="true"><span class="octicon octicon-link"></span></a>:types: Section</h3>

<p>This defines type of visit, you can reference these later when creating points.</p>

<p>The sample data sets up 3 types.</p>

<p>A number of markers are included already for you to use, you can see them <a href="https://github.com/ripienaar/travlrmap/tree/master/public/markers">here</a>.
A handy service for creating custom ones on demand can be found at <a href="http://www.googlemapsmarkers.com/">http://www.googlemapsmarkers.com/</a></p>

<h2>
<a id="authentication" class="anchor" href="#authentication" aria-hidden="true"><span class="octicon octicon-link"></span></a>Authentication?</h2>

<p>You can enable authentication on the <code>/geocode</code> url and the REST endpoing used to
encode points, you have to set 4 config items in the configuration file in the map section.</p>

<p>Not much point to this today but in future I'll enable saving of data and authentication
will be needed then.</p>

<pre><code>  :authenticate: true
  :admin_user: admin
  :admin_salt: a929d3a47ee0c151fcf2cfde9efabf605bb0f999c672cf5bd0816c303fd6f778
  :admin_hash: 156166b575d6074b82f7f6c8453b81b8
</code></pre>

<p>To calculate a salt run the following command, salts must be at least 16 chanracters:</p>

<pre><code>$ openssl rand 32 -hex
a929d3a47ee0c151fcf2cfde9efabf605bb0f999c672cf5bd0816c303fd6f778
</code></pre>

<p>Given the salt you can calculate your password hash by concatenating your password and
calculating the md5 of the combination:</p>

<pre><code>$ echo -n a929d3a47ee0c151fcf2cfde9efabf605bb0f999c672cf5bd0816c303fd6f778password | md5sum
156166b575d6074b82f7f6c8453b81b8
</code></pre>

<p><em>NOTE: The values shown above is wrong on purpose, make your own correct ones</em></p>

<h2>
<a id="contact" class="anchor" href="#contact" aria-hidden="true"><span class="octicon octicon-link"></span></a>Contact?</h2>

<p>R.I.Pienaar / <a href="mailto:rip@devco.net">rip@devco.net</a> / <a href="https://github.com/ripienaar" class="user-mention">@ripienaar</a> / <a href="http://devco.net/">http://devco.net/</a></p>
        </section>

        <aside id="sidebar">
          <a href="https://github.com/ripienaar/travlrmap/zipball/master" class="button">
            <small>Download</small>
            .zip file
          </a>
          <a href="https://github.com/ripienaar/travlrmap/tarball/master" class="button">
            <small>Download</small>
            .tar.gz file
          </a>

          <p class="repo-owner"><a href="https://github.com/ripienaar/travlrmap"></a> is maintained by <a href="https://github.com/ripienaar">ripienaar</a>.</p>

          <p>This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the Architect theme by <a href="https://twitter.com/jasonlong">Jason Long</a>.</p>
        </aside>
      </div>
    </div>

            <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
          </script>
          <script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("UA-10152852-2");
            pageTracker._trackPageview();
            } catch(err) {}
          </script>

  </body>
</html>
